<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>í‹°ì¼“ì¸  tCATS - MVP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #E15E6E 0%, #F06292 100%);
            min-height: 100vh;
            padding: 0;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 100%;
            margin: 0;
            background: white;
            min-height: 100vh;
        }

        /* í—¤ë” */
        .header {
            background: linear-gradient(135deg, #E15E6E 0%, #F06292 100%);
            color: white;
            padding: 20px 15px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
            font-weight: 700;
        }

        .header p {
            font-size: 12px;
            opacity: 0.95;
        }

        /* íƒ­ ë²„íŠ¼ */
        .tab-buttons {
            display: flex;
            background: #f8f8f8;
            border-bottom: 2px solid #e0e0e0;
            position: sticky;
            top: 80px;
            z-index: 99;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .tab-buttons::-webkit-scrollbar {
            display: none;
        }

        .tab-btn {
            flex: 1;
            min-width: 100px;
            padding: 15px 10px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
            white-space: nowrap;
            border-bottom: 3px solid transparent;
        }

        .tab-btn.active {
            background: white;
            color: #E15E6E;
            border-bottom-color: #E15E6E;
        }

        /* íƒ­ ë‚´ìš© */
        .tab-content {
            display: none;
            padding: 15px;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            border: 1px solid #f0f0f0;
        }

        .card-title {
            font-size: 18px;
            font-weight: 700;
            color: #E15E6E;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-subtitle {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin: 15px 0 10px;
            padding-left: 10px;
            border-left: 3px solid #E15E6E;
        }

        /* ì²´í¬ë°•ìŠ¤ */
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 10px 0;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: #f8f8f8;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .checkbox-item:active {
            background: #f0f0f0;
            transform: scale(0.98);
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-item label {
            flex: 1;
            font-size: 15px;
            cursor: pointer;
        }

        /* ê²°ê³¼ ë°•ìŠ¤ */
        .result-box {
            background: linear-gradient(135deg, #fff5f7 0%, #ffe8ec 100%);
            border: 2px solid #E15E6E;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            margin: 15px 0;
        }

        .result-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }

        .result-value {
            font-size: 32px;
            font-weight: 700;
            color: #E15E6E;
            line-height: 1.2;
        }

        /* ë²„íŠ¼ */
        .btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin: 8px 0;
        }

        .btn-primary {
            background: linear-gradient(135deg, #E15E6E 0%, #F06292 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(225, 94, 110, 0.3);
        }

        .btn-primary:active {
            transform: scale(0.98);
            box-shadow: 0 2px 8px rgba(225, 94, 110, 0.3);
        }

        .btn-secondary {
            background: white;
            color: #E15E6E;
            border: 2px solid #E15E6E;
        }

        .btn-secondary:active {
            background: #fff5f7;
        }

        /* í†µê³„ ê·¸ë¦¬ë“œ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .stat-item {
            background: linear-gradient(135deg, #E15E6E 0%, #F06292 100%);
            color: white;
            border-radius: 12px;
            padding: 15px 10px;
            text-align: center;
        }

        .stat-label {
            font-size: 11px;
            margin-bottom: 5px;
            opacity: 0.9;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
        }

        /* í…Œì´ë¸” - ëª¨ë°”ì¼ ìµœì í™” */
        .table-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: 15px -20px;
            padding: 0 20px;
        }

        .table {
            width: 100%;
            min-width: 600px;
            border-collapse: collapse;
            background: white;
        }

        .table th,
        .table td {
            padding: 12px 8px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
            font-size: 13px;
        }

        .table th {
            background: #E15E6E;
            color: white;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .table tr:last-child td {
            border-bottom: none;
        }

        /* ì¢Œì„ ë°°ì • ì„¹ì…˜ */
        .seat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(45px, 1fr));
            gap: 8px;
            margin: 15px 0;
        }

        .seat-btn {
            aspect-ratio: 1;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .seat-btn.reserved {
            background: #f0f0f0;
            color: #999;
            cursor: not-allowed;
        }

        .seat-btn.selected {
            background: #E15E6E;
            color: white;
            border-color: #E15E6E;
        }

        /* DM ì¹´ë“œ */
        .dm-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .dm-card:active {
            transform: scale(0.98);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .dm-card-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .dm-card-info {
            font-size: 13px;
            color: #666;
            margin-bottom: 5px;
        }

        .dm-card-discount {
            display: inline-block;
            background: #E15E6E;
            color: white;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: 600;
        }

        /* QR ì½”ë“œ */
        .qr-display {
            background: white;
            border: 3px solid #E15E6E;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
        }

        .qr-code {
            width: 200px;
            height: 200px;
            margin: 0 auto 15px;
            background: #f8f8f8;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            border-radius: 10px;
        }

        .qr-info {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
        }

        /* ë³„ì  */
        .star-rating {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .star {
            font-size: 40px;
            cursor: pointer;
            transition: all 0.2s;
            color: #ddd;
        }

        .star.active {
            color: #FFD700;
        }

        .star:active {
            transform: scale(1.2);
        }

        /* ì•Œë¦¼ */
        .alert {
            background: #E15E6E;
            color: white;
            padding: 12px 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 14px;
            text-align: center;
            animation: slideDown 0.3s;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ì…ë ¥ í•„ë“œ */
        .input-group {
            margin: 15px 0;
        }

        .input-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .input-field {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.2s;
        }

        .input-field:focus {
            outline: none;
            border-color: #E15E6E;
        }

        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        .loading {
            text-align: center;
            padding: 20px;
            color: #E15E6E;
        }

        .loading:after {
            content: '...';
            animation: dots 1.5s infinite;
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        /* ë°°ì§€ */
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 5px;
        }

        .badge-success {
            background: #4CAF50;
            color: white;
        }

        .badge-warning {
            background: #FF9800;
            color: white;
        }

        .badge-danger {
            background: #F44336;
            color: white;
        }

        /* êµ¬ë¶„ì„  */
        .divider {
            height: 1px;
            background: #e0e0e0;
            margin: 20px 0;
        }

        /* ë°˜ì‘í˜• ì¶”ê°€ */
        @media (max-width: 480px) {
            .header h1 {
                font-size: 20px;
            }

            .card-title {
                font-size: 16px;
            }

            .result-value {
                font-size: 28px;
            }

            .stats-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
            }

            .stat-item {
                padding: 12px 8px;
            }

            .stat-label {
                font-size: 10px;
            }

            .stat-value {
                font-size: 20px;
            }

            .seat-grid {
                grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
                gap: 6px;
            }

            .qr-code {
                width: 180px;
                height: 180px;
                font-size: 70px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <div class="header">
            <img src="logo.png" alt="tCATS ë¡œê³ " style="height: 60px; margin-bottom: 10px;">
            <h1>í‹°ì¼“ì¸  tCATS</h1>
            <p>ê³µì—° ë°ì´í„° í†µí•© í”Œë«í¼</p>
        </div>

        <!-- íƒ­ ë²„íŠ¼ -->
        <div class="tab-buttons">
            <button class="tab-btn active" onclick="showTab('admin')">ê´€ë¦¬ì</button>
            <button class="tab-btn" onclick="showTab('partner')">ì œì‘ì‚¬</button>
            <button class="tab-btn" onclick="showTab('user')">íšŒì›</button>
        </div>

        <!-- ê´€ë¦¬ì ë°±ì˜¤í”¼ìŠ¤ -->
        <div id="admin" class="tab-content active">
            <!-- 1. í†µí•© ëª…ë¶€ ìƒì„± -->
            <div class="card">
                <div class="card-title">ğŸ“‹ 1. í†µí•© ëª…ë¶€ ìƒì„±</div>
                <p style="font-size: 13px; color: #666; margin-bottom: 15px;">
                    ì—¬ëŸ¬ ì˜ˆë§¤ì²˜ì˜ ì˜ˆì•½ì ëª…ë‹¨ì„ í•˜ë‚˜ë¡œ í†µí•©í•©ë‹ˆë‹¤.
                </p>
                <button class="btn btn-secondary" onclick="uploadFiles()">
                    ğŸ“ ì˜ˆë§¤ì²˜ íŒŒì¼ ì—…ë¡œë“œ
                </button>
                <div id="uploadResult"></div>
            </div>

            <!-- 2. ì˜ˆì•½ì ë¦¬ìŠ¤íŠ¸ -->
            <div class="card">
                <div class="card-title">ğŸ‘¥ 2. ì˜ˆì•½ì ë¦¬ìŠ¤íŠ¸</div>
                <div class="table-wrapper">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ì˜ˆë§¤ë²ˆí˜¸</th>
                                <th>ì˜ˆë§¤ì²˜</th>
                                <th>ì´ë¦„</th>
                                <th>ì¢Œì„ì •ë³´</th>
                                <th>ìˆ˜ëŸ‰</th>
                                <th>ìƒíƒœ</th>
                            </tr>
                        </thead>
                        <tbody id="attendanceTable">
                            <tr>
                                <td>IP20251015001</td>
                                <td>ì¸í„°íŒŒí¬</td>
                                <td>ê¹€ì² ìˆ˜</td>
                                <td>Rì„ A-15, A-16</td>
                                <td>2</td>
                                <td><span class="badge badge-success">âœ“ ì§€ì •</span></td>
                            </tr>
                            <tr>
                                <td>YES20251015002</td>
                                <td>ì˜ˆìŠ¤24</td>
                                <td>ì´ì˜í¬</td>
                                <td>-</td>
                                <td>3</td>
                                <td><span class="badge badge-warning">ìë™ë°°ì •</span></td>
                            </tr>
                            <tr>
                                <td>INT20251015003</td>
                                <td>ì¸í„°íŒŒí¬</td>
                                <td>ë°•ë¯¼ìˆ˜</td>
                                <td>Sì„ B-10</td>
                                <td>1</td>
                                <td><span class="badge badge-success">âœ“ ì§€ì •</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- 3. ìë™ ì¢Œì„ ë°°ì • -->
            <div class="card">
                <div class="card-title">ğŸ’º 3. ìë™ ì¢Œì„ ë°°ì •</div>
                <p style="font-size: 13px; color: #666; margin-bottom: 15px;">
                    ë¹„ì§€ì •ì„ ì˜ˆë§¤ìì—ê²Œ ìµœì ì˜ ì¢Œì„ì„ ìë™ìœ¼ë¡œ ë°°ì •í•©ë‹ˆë‹¤.
                </p>
                <div class="seat-grid" id="seatGrid"></div>
                <button class="btn btn-primary" onclick="autoAssignSeats()">
                    ìë™ ë°°ì • ì‹¤í–‰
                </button>
            </div>

            <!-- 4. í†µí•© í†µê³„ -->
            <div class="card">
                <div class="card-title">ğŸ“Š 4. í†µí•© í†µê³„</div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-label">ì´ ì˜ˆë§¤ììˆ˜</div>
                        <div class="stat-value">247ëª…</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">QR ë°œê¶Œìˆ˜</div>
                        <div class="stat-value" id="qrIssued">185ëª…</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">í˜„ì¬ ì…ì¥ê°</div>
                        <div class="stat-value" id="currentEntry">142ëª…</div>
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="refreshAdminStats()">
                    ğŸ”„ ì‹¤ì‹œê°„ ìƒˆë¡œê³ ì¹¨
                </button>
            </div>
        </div>

        <!-- ì œì‘ì‚¬ ëŒ€ì‹œë³´ë“œ -->
        <div id="partner" class="tab-content">
            <!-- 1. íƒ€ê²Ÿ ê´€ê° ì„ íƒ -->
            <div class="card">
                <div class="card-title">ğŸ¯ 1. íƒ€ê²Ÿ ê´€ê° ì„ íƒ</div>
                
                <div class="card-subtitle">ì—°ë ¹ëŒ€</div>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="age20" checked onchange="updateTargetCount()">
                        <label for="age20">20ëŒ€</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="age30" checked onchange="updateTargetCount()">
                        <label for="age30">30ëŒ€</label>
                    </div>
                </div>

                <div class="card-subtitle">ì„ í˜¸ ì¥ë¥´</div>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="musical" checked onchange="updateTargetCount()">
                        <label for="musical">ë®¤ì§€ì»¬</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="play" onchange="updateTargetCount()">
                        <label for="play">ì—°ê·¹</label>
                    </div>
                </div>

                <div class="result-box">
                    <div class="result-label">ì˜ˆìƒ íƒ€ê²Ÿ ìˆ˜:</div>
                    <div class="result-value" id="targetCount">1,247ëª…</div>
                </div>
            </div>

            <!-- 2. DM ë°œì†¡ -->
            <div class="card">
                <div class="card-title">ğŸ’Œ 2. DM ë°œì†¡</div>
                
                <div class="input-group">
                    <label class="input-label">ê³µì—° ì œëª©</label>
                    <input type="text" class="input-field" id="showTitle" placeholder="ê³µì—° ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" value="ë®¤ì§€ì»¬ <ì‹œì¹´ê³ >">
                </div>

                <div class="input-group">
                    <label class="input-label">í• ì¸ìœ¨</label>
                    <input type="text" class="input-field" id="discountRate" placeholder="ì˜ˆ: 30%" value="30%">
                </div>

                <div class="input-group">
                    <label class="input-label">ë©”ì‹œì§€ ë‚´ìš©</label>
                    <textarea class="input-field" id="dmMessage" rows="4" placeholder="ê´€ê°ì—ê²Œ ì „ë‹¬í•  ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”">ë¸Œë¡œë“œì›¨ì´ ìµœê³ ì˜ ë®¤ì§€ì»¬ <ì‹œì¹´ê³ >ë¥¼ íŠ¹ë³„í•œ ê°€ê²©ìœ¼ë¡œ ë§Œë‚˜ë³´ì„¸ìš”!</textarea>
                </div>

                <button class="btn btn-primary" onclick="sendDM()">
                    ğŸ“¨ DM ë°œì†¡í•˜ê¸°
                </button>
                <div id="dmResult"></div>
            </div>

            <!-- 3. ë§ˆì¼€íŒ… ì„±ê³¼ -->
            <div class="card">
                <div class="card-title">ğŸ“Š 3. ë§ˆì¼€íŒ… ì„±ê³¼</div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-label">ì˜¤í”ˆìœ¨</div>
                        <div class="stat-value" id="openRate">0%</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">í´ë¦­ìœ¨</div>
                        <div class="stat-value" id="clickRate">0%</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">ì „í™˜ìœ¨</div>
                        <div class="stat-value" id="conversionRate">0%</div>
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="updateStats()">
                    ğŸ“ˆ ì„±ê³¼ í™•ì¸
                </button>
            </div>
        </div>

        <!-- íšŒì› ëª¨ë“œ -->
        <div id="user" class="tab-content">
            <!-- 1. DM ìˆ˜ì‹ í•¨ -->
            <div class="card">
                <div class="card-title">ğŸ’Œ 1. ë°›ì€ DM</div>
                
                <div class="dm-card" onclick="showDMDetail()">
                    <div class="dm-card-title">ë®¤ì§€ì»¬ <ì‹œì¹´ê³ ></div>
                    <div class="dm-card-info">ğŸ“… 2025.11.15 - 11.30</div>
                    <div class="dm-card-info">ğŸ“ ì˜ˆìˆ ì˜ì „ë‹¹ CJí† ì›”ê·¹ì¥</div>
                    <div class="dm-card-discount">30% íŠ¹ë³„ í• ì¸</div>
                </div>

                <div class="dm-card">
                    <div class="dm-card-title">ì—°ê·¹ <í–„ë¦¿></div>
                    <div class="dm-card-info">ğŸ“… 2025.11.20 - 12.10</div>
                    <div class="dm-card-info">ğŸ“ ëŒ€í•™ë¡œ ì˜ˆìˆ ê·¹ì¥</div>
                    <div class="dm-card-discount">20% ì¡°ê¸°ì˜ˆë§¤ í• ì¸</div>
                </div>
            </div>

            <!-- 2. QR ë°œê¸‰ -->
            <div class="card">
                <div class="card-title">ğŸ« 2. QR ì…ì¥ê¶Œ ë°œê¸‰</div>
                
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="agreeInfo">
                        <label for="agreeInfo" style="font-size: 13px;">
                            ê´€ê° ì •ë³´ í™œìš©ì— ë™ì˜í•©ë‹ˆë‹¤ (ì„ íƒ)
                        </label>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="generateQR()">
                    QR ë°œê¸‰ë°›ê¸°
                </button>

                <div id="qrDisplay"></div>
            </div>

            <!-- 3. ë¦¬ë·° & ë¦¬ì›Œë“œ -->
            <div class="card">
                <div class="card-title">â­ 3. ë¦¬ë·° & ë¦¬ì›Œë“œ</div>
                <p style="font-size: 13px; color: #666; margin-bottom: 15px;">
                    ê³µì—° ë§Œì¡±ë„ë¥¼ í‰ê°€í•˜ê³  ë¦¬ì›Œë“œë¥¼ ë°›ìœ¼ì„¸ìš”!
                </p>
                
                <div class="card-subtitle">ê³µì—°ì€ ì–´ë– ì…¨ë‚˜ìš”?</div>
                <div class="star-rating">
                    <span class="star" onclick="setRating(1)">â˜…</span>
                    <span class="star" onclick="setRating(2)">â˜…</span>
                    <span class="star" onclick="setRating(3)">â˜…</span>
                    <span class="star" onclick="setRating(4)">â˜…</span>
                    <span class="star" onclick="setRating(5)">â˜…</span>
                </div>

                <div class="input-group">
                    <label class="input-label">í•œì¤„í‰ì„ ë‚¨ê²¨ì£¼ì„¸ìš”</label>
                    <textarea class="input-field" rows="3" placeholder="ê³µì—° í›„ê¸°ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš” (ì„ íƒ)"></textarea>
                </div>

                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="recommend">
                        <label for="recommend">ì§€ì¸ì—ê²Œ ì¶”ì²œí•˜ê³  ì‹¶ì–´ìš”</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="revisit">
                        <label for="revisit">ë‹¤ì‹œ ê´€ëŒí•˜ê³  ì‹¶ì–´ìš”</label>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="submitReview()">
                    í‰ê°€ ì œì¶œí•˜ê¸°
                </button>
                <div id="reviewResult"></div>
            </div>
        </div>
    </div>

    <script>
        // íƒ­ ì „í™˜
        function showTab(tabName) {
            // ëª¨ë“  íƒ­ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // ì„ íƒí•œ íƒ­ ë³´ì´ê¸°
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // ë§¨ ìœ„ë¡œ ìŠ¤í¬ë¡¤
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // íƒ€ê²Ÿ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
        function updateTargetCount() {
            let count = 0;
            const age20 = document.getElementById('age20').checked;
            const age30 = document.getElementById('age30').checked;
            const musical = document.getElementById('musical').checked;
            const play = document.getElementById('play').checked;

            // ê°„ë‹¨í•œ ê³„ì‚° ë¡œì§
            if (age20) count += 650;
            if (age30) count += 597;
            if (musical && !play) count = Math.floor(count * 1.0);
            if (play && !musical) count = Math.floor(count * 0.6);
            if (musical && play) count = Math.floor(count * 1.2);

            document.getElementById('targetCount').textContent = count.toLocaleString() + 'ëª…';
        }

        // ê´€ë¦¬ì í†µê³„ ìƒˆë¡œê³ ì¹¨
        function refreshAdminStats() {
            const qrIssued = document.getElementById('qrIssued');
            const currentEntry = document.getElementById('currentEntry');
            
            // ëœë¤í•˜ê²Œ ì¦ê°€
            const qr = 185 + Math.floor(Math.random() * 15);
            const entry = 142 + Math.floor(Math.random() * 20);
            
            qrIssued.textContent = qr + 'ëª…';
            currentEntry.textContent = entry + 'ëª…';
            
            alert('âœ… í†µê³„ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nQR ë°œê¶Œ: ' + qr + 'ëª…\ní˜„ì¬ ì…ì¥: ' + entry + 'ëª…');
        }

        // íŒŒì¼ ì—…ë¡œë“œ
        function uploadFiles() {
            const resultDiv = document.getElementById('uploadResult');
            resultDiv.innerHTML = '<div class="loading">íŒŒì¼ ì—…ë¡œë“œ ì¤‘</div>';
            
            setTimeout(() => {
                resultDiv.innerHTML = `
                    <div class="alert">
                        âœ… 3ê°œ ì˜ˆë§¤ì²˜ íŒŒì¼ í†µí•© ì™„ë£Œ!<br>
                        ì´ 247ëª…ì˜ ì˜ˆì•½ìê°€ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤.
                    </div>
                `;
            }, 1500);
        }

        // ì¢Œì„ ê·¸ë¦¬ë“œ ìƒì„±
        function initSeatGrid() {
            const seatGrid = document.getElementById('seatGrid');
            const rows = ['A', 'B', 'C', 'D'];
            const seats = [];

            rows.forEach(row => {
                for (let i = 1; i <= 10; i++) {
                    const seatBtn = document.createElement('button');
                    seatBtn.className = 'seat-btn';
                    seatBtn.textContent = row + i;
                    
                    // ì¼ë¶€ ì¢Œì„ì€ ì´ë¯¸ ì˜ˆì•½ë¨
                    if (Math.random() > 0.6) {
                        seatBtn.classList.add('reserved');
                    }
                    
                    seatGrid.appendChild(seatBtn);
                }
            });
        }

        // ìë™ ì¢Œì„ ë°°ì •
        function autoAssignSeats() {
            const seats = document.querySelectorAll('.seat-btn:not(.reserved)');
            let assigned = 0;
            
            seats.forEach((seat, index) => {
                if (index < 5) { // 5ëª… ë°°ì •
                    setTimeout(() => {
                        seat.classList.add('selected');
                        assigned++;
                        if (assigned === 5) {
                            alert('âœ… 5ëª…ì˜ ë¹„ì§€ì •ì„ ì˜ˆë§¤ìì—ê²Œ ì¢Œì„ì´ ìë™ ë°°ì •ë˜ì—ˆìŠµë‹ˆë‹¤!');
                        }
                    }, index * 200);
                }
            });
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            const stats = [
                { id: 'openRate', value: 85 },
                { id: 'clickRate', value: 42 },
                { id: 'conversionRate', value: 18 }
            ];

            stats.forEach(stat => {
                animateValue(stat.id, 0, stat.value, 1000);
            });
        }

        function animateValue(id, start, end, duration) {
            const element = document.getElementById(id);
            const range = end - start;
            const increment = range / (duration / 16);
            let current = start;

            const timer = setInterval(() => {
                current += increment;
                if (current >= end) {
                    current = end;
                    clearInterval(timer);
                }
                element.textContent = Math.round(current) + '%';
            }, 16);
        }

        // DM ë°œì†¡
        function sendDM() {
            const resultDiv = document.getElementById('dmResult');
            resultDiv.innerHTML = '<div class="loading">DM ë°œì†¡ ì¤‘</div>';
            
            setTimeout(() => {
                resultDiv.innerHTML = `
                    <div class="alert">
                        âœ… 1,247ëª…ì—ê²Œ DMì´ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!<br>
                        ê´€ë¦¬ì ìŠ¹ì¸ í›„ ì „ë‹¬ë©ë‹ˆë‹¤.
                    </div>
                `;
                updateStats();
            }, 2000);
        }

        // DM ìƒì„¸ë³´ê¸°
        function showDMDetail() {
            alert('ğŸ­ ë®¤ì§€ì»¬ <ì‹œì¹´ê³ >\n\në¸Œë¡œë“œì›¨ì´ ìµœê³ ì˜ ë®¤ì§€ì»¬ì„ íŠ¹ë³„í•œ ê°€ê²©ìœ¼ë¡œ!\n\nğŸ“… 2025.11.15 - 11.30\nğŸ“ ì˜ˆìˆ ì˜ì „ë‹¹ CJí† ì›”ê·¹ì¥\nğŸ’° 30% íŠ¹ë³„ í• ì¸');
        }

        // QR ìƒì„±
        function generateQR() {
            const agree = document.getElementById('agreeInfo').checked;
            const qrDisplay = document.getElementById('qrDisplay');
            
            qrDisplay.innerHTML = '<div class="loading">QR ìƒì„± ì¤‘</div>';
            
            setTimeout(() => {
                qrDisplay.innerHTML = `
                    <div class="qr-display">
                        <div class="qr-code">ğŸ“±</div>
                        <div class="qr-info">
                            <strong>ë®¤ì§€ì»¬ <ì‹œì¹´ê³ ></strong><br>
                            2025.11.15 (ê¸ˆ) 19:30<br>
                            Rì„ A-15, A-16<br>
                            ${agree ? '<br>âœ… ì •ë³´ í™œìš© ë™ì˜ ì™„ë£Œ' : ''}
                        </div>
                    </div>
                `;
            }, 1500);
        }

        // ë³„ì  ì„¤ì •
        function setRating(rating) {
            const stars = document.querySelectorAll('.star');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        // ë¦¬ë·° ì œì¶œ
        function submitReview() {
            const rating = document.querySelectorAll('.star.active').length;
            const recommend = document.getElementById('recommend').checked;
            const revisit = document.getElementById('revisit').checked;
            
            if (rating === 0) {
                alert('â­ ë³„ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }

            const resultDiv = document.getElementById('reviewResult');
            let points = rating * 200; // ë³„ 1ê°œë‹¹ 200í¬ì¸íŠ¸
            if (recommend) points += 200;
            if (revisit) points += 200;

            resultDiv.innerHTML = `
                <div class="alert">
                    âœ… í‰ê°€ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!<br>
                    ${points}Pê°€ ì ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ’°<br>
                    (1,000P = 1,000ì›)
                </div>
            `;
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = function() {
            initSeatGrid();
        };
    </script>
</body>
</html>
